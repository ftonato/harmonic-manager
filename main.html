<html>
<head>
  <title>Harmonic Manager</title>
  
  <link rel="stylesheet" href="http://milligram.github.io/css/milligram.min.css">
  <style>
    #form-visible {
      display:none;
    }
  </style>
</head>

<body>
  <h1 style="text-align: center">
   <img src="https://camo.githubusercontent.com/b8af3b8635183adf8bf76102859dd2b7b04be1d8/68747470733a2f2f63646e2e7261776769742e636f6d2f4a53526f636b7348512f6861726d6f6e69632f653339316165343632663362303437383438663137383333313564653965646162303139653139372f6861726d6f6e69632d6c6f676f2e737667" alt="Harmonic">
 </h1>

 <br>
 <div class="container">
  <div class="row">
    <div class="column column-50 column-offset-25">
      <form>
        <fieldset>
          <label for="default_folder_field">Selected Folder</label>
          <input placeholder="Select a folder" id="default_folder_field" type="text" disabled="disabled">

          <div id="form-visible">
            <label for="nameField">Name</label>
            <input placeholder="Awesome website" id="nameField" type="text">
            <label for="titleField">Titlte</label>
            <input placeholder="My awesome static website" id="titleField" type="text">
            <label for="subtitleField">Subtitle</label>
            <input placeholder="Powered by Harmonic" id="subtitleField" type="text">

            <label for="descriptionField">Description</label>
            <textarea placeholder="This is the description" id="descriptionField"></textarea>

            <label for="authorField">Author</label>
            <input placeholder="Jaydson" id="authorField" type="text">

            <label for="bioField">Bio</label>
            <textarea placeholder="Thats me" id="bioField"></textarea>


            <label for="domainField">Domain</label>
            <input placeholder="http://awesome.com" id="domainField" type="text">

            <!-- Clear Button -->
            <input class="button button-clear" value="Cancel" type="submit">

            <!-- Outlined Button -->
            <button class="button button-outline" onclick="saveFile();">Save</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<script>require('./main.js');

  var fs = require('fs');
  var remote = require('remote');
  var dialog = remote.require('dialog');

  function saveFile () {

    var folderName = document.getElementById("default_folder_field").value;
    var fileName = 'harmonic.json';
    var fl = folderName+'/'+fileName;

    var contentFile = {
      "name": "JS Rocks",
      "title": "JS Rocks",
      "domain": "http://jsrocks.org",
      "subtitle": "Powered by Harmonic",
      "author": "JS Rocks",
      "description": "A collaborative website about the latest JavaScript features and tools.",
      "bio": "Thats me",
      "theme": "harmonic-theme-jsrocks",
      "preprocessor": "stylus",
      "posts_permalink" : ":language/:year/:month/:title",
      "pages_permalink": "pages/:title",
      "header_tokens": [
      "<!--",
      "-->"
      ],
      "index_posts": 20,
      "i18n": {
        "default": "en",
        "languages": [
        "en",
        "pt-br",
        "cn"
        ]
      }
    };

    var nameField = document.getElementById("nameField").value
    var titleField = document.getElementById("titleField").value
    var subtitleField = document.getElementById("subtitleField").value

    var descriptionField = document.getElementById("descriptionField").value
    var authorField = document.getElementById("authorField").value
    var bioField = document.getElementById("bioField").value
    var domainField = document.getElementById("domainField").value


    contentFile.name = nameField
    contentFile.title = titleField
    contentFile.subtitle = subtitleField
    contentFile.description = descriptionField
    contentFile.author = authorField
    contentFile.bio = bioField
    contentFile.domain = domainField

    fs.writeFile(fl, JSON.stringify(contentFile), function (err, data) {
      if (err) {
        return console.log('Error: ' + err);
      }
      console.log('File saved!',data);
    });

  }
</script>
</body>
</html>
